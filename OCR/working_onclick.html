<style>
label[for='image-input'] {
  background-color: #2ABCA5;
  padding: 5px;
  cursor: pointer;

}
input[type='file'] {
  visibility: hidden;
}

</style>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<div class="row">
  <div class="col-12">
    <label for="image-input">Choose File</label>
<input type='file'  id="image-input"/>
  </div>
</div>
<br>
<button id="myButton" onclick="driverfunction()">Proceed!</button>


<div class="row">
  <div class="col-12">
    <label for="thetext">Voici ton texte:</label>
  </div>
</div>
<div class="row">
  <div class="col-12">
    <textarea style="  font-size: 20px; " rows="10" cols="50" type="text" id="thetext" name="text_"> </textarea>
  </div>
</div>
<script>

const s = async (milliseconds) => {
    await new Promise(resolve => {
        return setTimeout(resolve, milliseconds)
    });
};
function getimage()
{
//console.log('called')
var input = document.getElementById("image-input");
    var file = input.files[0];
    if (file) {
        console.log("Selected file:", file.name);
    const apiKey = 'PR8HXT06VABX';
    const language = 'fre';
    const isOverlayRequired = true;

    var formData = new FormData();
    formData.append("apikey", apiKey);
    formData.append("language", language);
    formData.append("isOverlayRequired", isOverlayRequired);
    formData.append("file", file);

    fetch("https://apipro2.ocr.space/parse/image", {
      method: "POST",
      body: formData
    })
      .then(response => response.json())
      .then(data => {
             // console.log(data);

        edit_text= document.getElementById('thetext');
       // console.log(edit_text);
        edit_text.value=data['ParsedResults'][0]['ParsedText']
        //console.log(data['ParsedResults'][0]['ParsedText'])
}       )
      .catch(error => console.log(error));

    } else {
        console.log("No file selected");
    }
}

function driverfunction()
{
    var btn = document.getElementById("myButton");
    console.log('driver ')
    getimage()

}

const testSleep = async () => {
    console.log('Step 1')
    await s(20000);
    console.log('Step 2  ')

}

//testSleep();

        </script>
